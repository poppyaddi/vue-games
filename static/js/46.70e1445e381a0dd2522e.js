webpackJsonp([46],{qijS:function(t,e){},xyFY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("//Fk"),a=n.n(i),o=n("Dd8w"),r=n.n(o),s=n("rxb8"),c=n("uKtY"),l=n("yxO8"),d=n("icdD"),g=[{title:"id",dataIndex:"id",sorter:!0,align:"center",fixed:"left"},{title:"游戏名称",dataIndex:"name",align:"center"},{title:"面值名称",dataIndex:"gold",align:"center"},{title:"面值标识",dataIndex:"title",align:"center"},{title:"面值价格",dataIndex:"money",align:"center"},{title:"创建时间",dataIndex:"created_at",align:"center"},{title:"状态",dataIndex:"status",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",width:150,fixed:"right"}],u={components:{PriceAdd:c.default,PriceEdit:l.default,GameSearch:d.default},data:function(){return{data:[],pagination:{pageSize:15},loading:!1,columns:g,gold:"",filters:{},search:{},game_id:""}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},watch:{gold:function(t,e){""==t&&this.fetch({pageSize:this.pagination.pageSize,game_id:this.game_id})}},methods:{onSearch:function(t){var e=this;Object(s.e)({gold:t,game_id:this.game_id}).then(function(t){console.log(t),e.data=t.data.data;var n=r()({},e.pagination);n.total=t.data.total,e.pagination=n})},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onAdd:function(){this.fetch({pageSize:this.pagination.pageSize})},onEdit:function(){this.fetch(this.getPagination())},onSelect:function(t){this.game_id=t,this.fetch(r()({},this.pagination,{game_id:t}))},status:function(t){var e=this;Object(s.i)({id:t}).then(function(t){console.log(t),e.fetch(e.getPagination())})},pass:function(t){var e=this;this.$confirm({content:"确认入库跳过该面值验证？",cancelText:"取消",okText:"跳过",onOk:function(){return new a.a(function(n,i){Object(s.f)({id:t}).then(function(t){e.fetch(e.getPagination()),e.destroyAll()})})},onCancel:function(){e.destroyAll(),e.$message.info("取消跳过",2)}})},handleTableChange:function(t,e,n){var i=r()({},this.pagination);i.current=t.current,i.sortField=n.field,i.sortOrder=n.order,this.pagination=i,this.filters=e,this.fetch(r()({pageSize:t.pageSize,page:t.current,sortField:n.field,sortOrder:n.order},e,{gold:this.gold,game_id:this.game_id}))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(s.e)(e).then(function(e){console.log(e.data);var n=r()({},t.pagination),i=e.data;t.data=i.data,n.total=i.total,t.pagination=n,t.loading=!1})},del:function(t){var e=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new a.a(function(n,i){Object(s.b)({id:t}).then(function(t){e.$message.success("删除成功"),e.fetch(r()({pageSize:e.pagination.pageSize,page:e.pagination.current,sortField:e.pagination.sortField,sortOrder:e.pagination.sortOrder},e.filters)),e.destroyAll()})})},onCancel:function(){e.destroyAll(),e.$message.info("取消删除",2)}})},destroyAll:function(){this.$destroyAll()}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-row",[n("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:16,sm:16,md:16,lg:12,xl:3}},[n("price-add",{attrs:{"on-add":t.onAdd}})],1),t._v(" "),n("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:16,sm:16,md:16,lg:5,xl:5}},[n("game-search",{on:{select:t.onSelect}})],1),t._v(" "),n("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:16,sm:16,md:16,lg:5,xl:5}},[n("a-input-search",{attrs:{allowClear:"",placeholder:"请输入面值名称",enterButton:""},on:{search:t.onSearch},model:{value:t.gold,callback:function(e){t.gold=e},expression:"gold"}})],1)],1),t._v(" "),n("a-row",[n("a-col",[n("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,scroll:{x:1e3}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e){return n("span",{},[n("price-edit",{attrs:{id:e.id,"on-edit":t.onEdit}}),t._v(" "),n("a-button",{attrs:{size:"small",type:"danger",icon:"delete"},on:{click:function(n){return t.del(e.id)}}}),t._v(" "),n("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.status(e.id)}}},[t._v(t._s("禁用"==e.status?"启":"禁"))]),t._v(" "),n("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.pass(e.id)}}},[t._v("跳")])],1)}}])})],1)],1),t._v(" "),n("a-divider")],1)},staticRenderFns:[]};var f=n("VU/8")(u,h,!1,function(t){n("qijS")},null,null);e.default=f.exports}});
//# sourceMappingURL=46.70e1445e381a0dd2522e.js.map