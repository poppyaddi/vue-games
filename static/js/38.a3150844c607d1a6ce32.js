webpackJsonp([38,72],{"0qqb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),r=a.n(n),i=a("MArX"),s=a("PJh5"),o=a.n(s),l={name:"PermEdit",props:{onEdit:{type:Function,default:null},info:{type:Object,default:null}},data:function(){return{form:this.$form.createForm(this),visible:!1,perms:[],dateFormat:"YYYY-MM-DD"}},mounted:function(){},methods:{showDrawer:function(){console.log(this.info),this.detail()},onClose:function(){this.visible=!1},onChange:function(e,t){console.log(e,t)},detail:function(){var e=this;new r.a(function(t){Object(i.a)({id:e.info.id}).then(function(a){delete a.data.id,e.visible=!0,t(a),a.data.expire_time=o()(a.data.expire_time,e.dateFormat)})}).then(function(t){e.form.setFieldsValue(t.data)})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(console.log("Received values of form: ",a),a.id=t.info.id,Object(i.b)(a).then(function(e){console.log(e),t.onEdit(),t.$message.success(e.message),setTimeout(function(){t.onClose()},100)}))})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline"}},[a("a-button",{staticStyle:{"margin-top":"4px"},attrs:{size:"small",type:"primary"},on:{click:e.showDrawer}},[a("a-icon",{attrs:{type:"edit"}})],1),e._v(" "),a("a-drawer",{attrs:{title:"用户详情修改",width:520,visible:e.visible,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"},destroyOnClose:!0},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"用户昵称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入用户昵称"}]}],expression:"['name', {\n                rules: [{ required: true, message: '请输入用户昵称' }]\n              }]"}],attrs:{placeholder:"请输入用户昵称"}})],1)],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"用户昵称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入用户昵称"}]}],expression:"['nickname', {\n                rules: [{ required: true, message: '请输入用户昵称' }]\n              }]"}],attrs:{placeholder:"请输入用户昵称"}})],1)],1)],1),e._v(" "),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"账户余额"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["money",{rules:[{required:!1}]}],expression:"['money', {\n                rules: [{ required: false }]\n              }]"}],attrs:{placeholder:"请输入账户余额"}})],1)],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"过期时间"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expire_time",{rules:[{required:!0,message:"请输入过期时间"}]}],expression:"['expire_time', {\n                rules: [{ required: true, message: '请输入过期时间' }]\n              }]"}],on:{change:e.onChange}})],1)],1)],1),e._v(" "),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"收费方式"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["charge_status",{rules:[{required:!0,message:"请选择收费方式"}]}],expression:"['charge_status', {\n                rules: [{ required: true, message: '请选择收费方式' }]\n              }]"}],attrs:{placeholder:"请选择收费方式"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("月租收费")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("出库收费")]),e._v(" "),a("a-select-option",{attrs:{value:"3"}},[e._v("免费用户")])],1)],1)],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"是否可添加游戏包名"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["admin",{rules:[{required:!0,message:"请选择"}]}],expression:"['admin', {\n                rules: [{ required: true, message: '请选择' }]\n              }]"}],attrs:{placeholder:"请选择"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("可添加")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("不可添加")])],1)],1)],1)],1),e._v(" "),a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"首次登陆是否需启用"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["save_device",{rules:[{required:!0,message:"请选择是否需启用"}]}],expression:"['save_device', {\n                rules: [{ required: true, message: '请选择是否需启用' }]\n              }]"}],attrs:{placeholder:"请选择"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("需启用")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("无需启用")])],1)],1)],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"出库跳过已使用凭证"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pass_store",{rules:[{required:!0,message:"请选择"}]}],expression:"['pass_store', {\n                rules: [{ required: true, message: '请选择' }]\n              }]"}],attrs:{placeholder:"请选择"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("跳过")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("不跳过")])],1)],1)],1)],1),e._v(" "),a("a-form-item",{attrs:{"wrapper-col":{span:24,offset:0}}},[a("a-row",[a("a-col",{attrs:{span:8,offset:16}},[a("a-button",{style:{marginRight:"8px"},attrs:{size:"small"},on:{click:e.onClose}},[e._v("取消")]),e._v(" "),a("a-button",{attrs:{size:"small",type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},d=a("VU/8")(l,c,!1,null,null,null);t.default=d.exports},BEWe:function(e,t){},jT9v:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),r=a.n(n),i=a("Dd8w"),s=a.n(i),o=a("MArX"),l=[{title:"id",dataIndex:"user_id",sorter:!0,align:"center",fixed:"left"},{title:"主账户名称",dataIndex:"name",align:"center"},{title:"用户昵称",dataIndex:"nickname",align:"center"},{title:"收费模式",dataIndex:"charge_status",align:"center"},{title:"初次登陆是否需启用",dataIndex:"save_device",align:"center"},{title:"到期时间",dataIndex:"expire_time",align:"center"},{title:"用户状态",dataIndex:"status",align:"center",filters:[{text:"禁用",value:"2"},{text:"启用",value:"1"}],scopedSlots:{customRender:"status"}},{title:"账户余额",dataIndex:"money",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",fixed:"right"}],c={components:{InfoEdit:a("0qqb").default},data:function(){return{data:[],pagination:{pageSize:this.$store.getters.pagesize},loading:!1,columns:l,name:"",nickname:"",filters:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize})},watch:{name:function(e,t){""==e&&this.fetch({pageSize:this.pagination.pageSize})},nickname:function(e,t){""==e&&this.fetch({pageSize:this.pagination.pageSize})}},methods:{getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onAdd:function(){this.fetch({pageSize:this.pagination.pageSize})},onEdit:function(){this.fetch(this.getPagination())},onSearch:function(e){var t=this;if(""==e.trim())return!1;Object(o.c)({name:this.name.trim(),nickname:this.nickname.trim()}).then(function(e){console.log(e),t.data=e.data.data;var a=s()({},t.pagination);a.total=e.data.total,t.pagination=a})},permAdd:function(){this.$router.push({name:"MenuAdd"})},handleTableChange:function(e,t,a){var n=s()({},this.pagination);n.current=e.current,n.sortField=a.field,n.sortOrder=a.order,this.pagination=n,this.filters=t,this.fetch(s()({pageSize:e.pageSize,page:e.current,sortField:a.field,sortOrder:a.order},t))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(o.c)(t).then(function(t){console.log(t.data);var a=s()({},e.pagination),n=t.data;e.data=n.data,a.total=n.total,e.pagination=a,e.loading=!1})},edit:function(e){this.$router.push({name:"MenuEdit",query:{id:e}})},pay_reset_password:function(e){var t=this;this.$confirm({content:"支付重置后不可恢复, 确认重置？",cancelText:"取消",okText:"重置",onOk:function(){return new r.a(function(a,n){Object(o.e)({id:e}).then(function(e){t.$message.success(e.message),t.destroyAll()})})},onCancel:function(){t.destroyAll(),t.$message.info("取消重置",2)}})},destroyAll:function(){this.$destroyAll()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",{style:{marginLeft:"20px"},attrs:{xs:24,sm:10,md:4,lg:4}},[a("a-input-search",{attrs:{placeholder:"用户名称搜索",enterButton:"",size:"small",allowClear:""},on:{search:e.onSearch},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("a-col",{style:{marginLeft:"20px"},attrs:{xs:24,sm:10,md:4,lg:4}},[a("a-input-search",{attrs:{placeholder:"用户昵称搜索",enterButton:"",size:"small",allowClear:""},on:{search:e.onSearch},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),e._v(" "),a("a-row",[a("a-col",[a("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading,scroll:{x:1100}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"id",fn:function(t){return a("span",{},[e._v(e._s(t.user.id?t.user.id:""))])}},{key:"status",fn:function(t){return a("span",{},[e._v(e._s(t?"启用":"禁用"))])}},{key:"action",fn:function(t){return a("span",{},[a("info-edit",{attrs:{info:t,"on-edit":e.onEdit}}),e._v(" "),a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.pay_reset_password(t.id)}}},[e._v("支重")])],1)}}])})],1)],1),e._v(" "),a("a-divider")],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(e){a("BEWe")},null,null);t.default=u.exports}});
//# sourceMappingURL=38.a3150844c607d1a6ce32.js.map