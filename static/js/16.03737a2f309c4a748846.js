webpackJsonp([16,62,99],{RdJz:function(t,e){},XQy9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),a=i.n(n),o=i("NKYV"),s=i("nlni"),r=i("kKyb"),l=[{title:"游戏名称",dataIndex:"game_name",align:"center"},{title:"面值名称",dataIndex:"gold",align:"center"},{title:"面值价格",dataIndex:"money",align:"center"},{title:"总数",dataIndex:"total",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],c={components:{OnSearch:s.default,Dist:r.default},data:function(){return{data:[],pagination:{pageSize:20},loading:!1,columns:l,totalMoney:0,search:{},filters:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},methods:{onSearch:function(t){this.search=t,this.fetch(a()({pageSize:this.pagination.pageSize},t))},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onDist:function(){this.fetch(a()({},this.getPagination(),this.search))},handleTableChange:function(t,e,i){var n=a()({},this.pagination);n.current=t.current,n.sortField=i.field,n.sortOrder=i.order,this.pagination=n,this.filters=e,this.fetch(a()({pageSize:t.pageSize,page:t.current,sortField:i.field,sortOrder:i.order},e,this.search))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(o.c)(e).then(function(e){console.log(e.data);var i=a()({},t.pagination),n=e.data;t.data=n.data,t.totalMoney=n.totalMoney,i.total=n.total,t.pagination=i,t.loading=!1})}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-row",{staticStyle:{"z-index":"2"}},[i("a-col",{attrs:{span:18}},[i("on-search",{on:{search:t.onSearch}})],1),t._v(" "),i("a-col",{style:{float:"right",marginRight:"20px",marginTop:"10px"},attrs:{span:2}},[i("a-tag",{attrs:{color:"#108ee9"}},[t._v("总额: "+t._s(t.totalMoney))])],1)],1),t._v(" "),i("a-row",[i("a-col",[i("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,width:"500"},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e){return i("span",{},[t.hasPermission("dist.dist")?i("dist",{attrs:{text:e},on:{dist:t.onDist}}):i("div",[t._v("无")])],1)}}])})],1)],1),t._v(" "),i("a-divider")],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(t){i("RdJz")},null,null);e.default=u.exports},kKyb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={components:{FormComponent:i("A3Ic").default},props:{text:{type:Object,default:null}},data:function(){return{ModalText:"Content of the modal",visible:!1,confirmLoading:!1}},methods:{showModal:function(){this.visible=!0,console.log(this.text)},handleOk:function(t){var e=this;this.ModalText="The modal will be closed after two seconds",this.confirmLoading=!0,setTimeout(function(){e.visible=!1,e.confirmLoading=!1},2e3)},handleCancel:function(t){console.log("Clicked cancel button"),this.visible=!1},onDist:function(){this.$emit("dist")}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline"}},[i("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.showModal}},[t._v("分配")]),t._v(" "),i("a-modal",{attrs:{title:"分配库存",visible:t.visible,confirmLoading:t.confirmLoading,width:"42%",footer:null},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("form-component",{attrs:{text:t.text},on:{cancel:function(e){t.visible=!1},dist:t.onDist}})],1)],1)},staticRenderFns:[]},o=i("VU/8")(n,a,!1,null,null,null);e.default=o.exports},nlni:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("AaXs"),a=i("rxb8"),o=i("vMJZ"),s={components:{},data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),games:[],prices:[],users:[]}},created:function(){this.getGameList(),this.getUserList("son")},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,i){t||(console.log("Received values of form: ",i),e.$emit("search",i))})},handleGameChange:function(t){console.log("selected "+t),t||this.form.setFieldsValue({price_id:void 0}),this.getPriceList(t)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getGameList:function(){var t=this;Object(n.e)().then(function(e){t.games=e.data})},getPriceList:function(t){var e=this;Object(a.g)({game_id:t}).then(function(t){e.prices=t.data})},getUserList:function(t){var e=this;Object(o.p)({user_type:t}).then(function(t){e.users=t.data})},reset:function(){this.form.resetFields()}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"z-index":"999"}},[i("a-form",{attrs:{form:t.form,layout:"inline"},on:{submit:t.handleSubmit}},[i("a-row",{staticStyle:{height:"60px","margin-left":"10px"}},[i("a-col",{attrs:{span:24}},[i("a-row",[i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:5,xs:20,sm:16,md:10,lg:6,xl:5}},[i("a-form-item",[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["game_id"],expression:"['game_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择游戏",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"},on:{change:t.handleGameChange}},t._l(t.games,function(e){return i("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:5,xs:20,sm:16,md:10,lg:6,xl:5}},[i("a-form-item",[i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_id"],expression:"['price_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择面值",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"}},t._l(t.prices,function(e){return i("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.gold))])}),1)],1)],1),t._v(" "),i("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:2,xs:20,sm:6,md:6,lg:2,xl:2}},[i("a-form-item",[i("a-button",{attrs:{size:"small",type:"primary","html-type":"submit"}},[t._v("搜索")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(s,r,!1,function(t){i("uJRK")},"data-v-1277b1a2",null);e.default=l.exports},uJRK:function(t,e){}});
//# sourceMappingURL=16.03737a2f309c4a748846.js.map