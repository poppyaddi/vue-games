webpackJsonp([59],{"0x0I":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Dd8w"),a=n.n(i),o=n("Nk6W"),r=[{title:"id",dataIndex:"id",sorter:!0,align:"center",fixed:"left"},{title:"供货账户",key:"user",align:"center",scopedSlots:{customRender:"user"}},{title:"游戏名称",key:"game",align:"center",scopedSlots:{customRender:"game"}},{title:"面值名称",key:"price",align:"center",scopedSlots:{customRender:"price"}},{title:"供货总量",dataIndex:"default_unit",align:"center"},{title:"供货数量",dataIndex:"unit",align:"center"},{title:"订单单价",dataIndex:"unit_price",align:"center"},{title:"订单总价",key:"total_money",align:"center",scopedSlots:{customRender:"total_money"}},{title:"状态",dataIndex:"status",align:"center"},{title:"发布时间",dataIndex:"created_at",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",fixed:"right"}],s={components:{},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},data:function(){return{data:[],pagination:{pageSize:12},loading:!1,columns:r,selectedRowKeys:[],name:"",filters:{},search:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},methods:{onSearch:function(e){this.search=e,this.fetch(a()({},e,{pageSize:this.pagination.pageSize}))},onUpdate:function(){this.fetch(a()({},this.getPagination(),this.search))},buy:function(){this.onUpdate()},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},finish:function(e){var t=this;console.log(e),Object(o.c)({id:e}).then(function(n){console.log(n);var i=t;t.$confirm({title:"确认供货?",content:n.message,onOk:function(){i.done(e)},onCancel:function(){},okText:"确认",cancelText:"取消"})})},done:function(e){var t=this;Object(o.b)({id:e}).then(function(e){console.log(e),t.$message.success(e.message),t.onUpdate()})},handleTableChange:function(e,t,n){var i=a()({},this.pagination);i.current=e.current,i.sortField=n.field,i.sortOrder=n.order,this.pagination=i,this.filters=t,this.fetch(a()({pageSize:e.pageSize,page:e.current,sortField:n.field,sortOrder:n.order},t,this.search))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(o.d)(t).then(function(t){console.log(t.data);var n=a()({},e.pagination),i=t.data;e.data=i.data,n.total=i.total,e.pagination=n,e.loading=!1})},destroyAll:function(){this.$destroyAll()},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",[n("a-col",{staticStyle:{"margin-top":"20px"}},[n("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading,scroll:{x:1100}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"user",fn:function(t){return n("span",{},[e._v(e._s(t.user.nickname))])}},{key:"game",fn:function(t){return n("span",{},[e._v(e._s(t.price.game.name))])}},{key:"price",fn:function(t){return n("span",{},[e._v(e._s(t.price.gold))])}},{key:"total_money",fn:function(t){return n("span",{},[e._v(e._s(t.default_unit*t.unit_price))])}},{key:"owner_user_id",fn:function(t){return n("span",{},[t.son?n("div",[e._v(e._s(t.son.name))]):n("div",[e._v(e._s(t.user.name))])])}},{key:"action",fn:function(t){return n("span",{},[n("a-button",{attrs:{type:"primary",size:"small",disabled:0==t.unit},on:{click:function(n){return e.finish(t.id)}}},[e._v("供货")])],1)}}])})],1)],1),e._v(" "),n("a-divider")],1)},staticRenderFns:[]};var l=n("VU/8")(s,c,!1,function(e){n("HkXX")},null,null);t.default=l.exports},HkXX:function(e,t){}});
//# sourceMappingURL=59.9231bb7ac310bda3639e.js.map