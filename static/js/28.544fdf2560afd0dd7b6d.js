webpackJsonp([28,75,76],{"1ySd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("//Fk"),n=a.n(r),o=a("bUp0"),i=(a("/Luh"),{name:"MenuAdd",props:{id:{type:Number,default:null},onEdit:{type:Function,default:null}},data:function(){return{form:this.$form.createForm(this),visible:!1,formLayout:"horizontal",menus:[]}},created:function(){},mounted:function(){},methods:{showDrawer:function(){this.getMenuList()},onClose:function(){this.form.resetFields(),this.visible=!1},getMenuList:function(){var e=this;Object(o.f)().then(function(t){e.menus=t.data,e.menuDetail(e.id)})},menuDetail:function(e){var t=this;new n.a(function(a){Object(o.c)({id:e}).then(function(e){delete e.data.id,delete e.data.key,t.visible=!0,a(e)})}).then(function(e){t.form.setFieldsValue(e.data)})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){if(console.log("values: ",a),Number(a.order)>255)return t.$message.error("排序不能大于255"),!1;a.id=t.id,Object(o.d)(a).then(function(e){t.onEdit(),t.$message.success(e.message),setTimeout(function(){t.onClose()},100)})}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{display:"inline"}},[a("a-button",{staticStyle:{"margin-top":"4px"},attrs:{size:"small",type:"primary"},on:{click:e.showDrawer}},[a("a-icon",{attrs:{type:"edit"}})],1),e._v(" "),a("a-drawer",{attrs:{title:"菜单修改",width:400,visible:e.visible,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:e.onClose}},[a("a-form",{staticStyle:{"margin-top":"20px"},attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"资源类型","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"必须选择资源类型"}]}],expression:"[\n        'type',\n        { rules: [{ required: true, message: '必须选择资源类型' }] },\n      ]"}],attrs:{placeholder:"请选择资源类型"}},[a("a-select-option",{attrs:{value:"m"}},[e._v("菜单")]),e._v(" "),a("a-select-option",{attrs:{value:"e"}},[e._v("页面元素")])],1)],1),e._v(" "),a("a-form-item",{attrs:{label:"父级菜单","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{rules:[{required:!0,message:"必须选择父级菜单"}]}],expression:"['parent_id', { rules: [{ required: true, message: '必须选择父级菜单' }] },]"}],attrs:{placeholder:"请选择父级菜单",showSearch:"",filterOption:e.filterOption}},[a("a-select-option",{attrs:{value:"0"}},[e._v("无父级菜单")]),e._v(" "),e._l(e.menus,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1),e._v(" "),a("a-form-item",{attrs:{label:"资源名称","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"资源名称必须填写"}]}],expression:"['title', { rules: [{ required: true, message: '资源名称必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入资源名称"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"资源标识","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["slug",{rules:[{required:!0,message:"资源标识必须填写"}]}],expression:"['slug', { rules: [{ required: true, message: '资源标识必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入资源标识"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"视图路径","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:"视图路径必须填写"}]}],expression:"['path', { rules: [{ required: true, message: '视图路径必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入视图路径"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"图标名称","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}],attrs:{allowClear:"",placeholder:"请输入图标名称"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"菜单排序","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["order",{rules:[{required:!0,type:"number",transform:function(e){return parseInt(e)},message:"必须为0-255数字"}]}],expression:"['order', { rules: [{ required: true, type: 'number',                    transform(value) { return parseInt(value) }, message: '必须为0-255数字' }] }]"}],attrs:{allowClear:"",placeholder:"请输入菜单排序"}})],1),e._v(" "),a("a-form-item",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0px",background:"#fff",textAlign:"right",marginBottom:"0"},attrs:{"wrapper-col":{span:24}}},[a("a-row",[a("a-col",{style:{textAlign:"left"},attrs:{span:4,offset:13}},[a("a-button",{attrs:{size:"small"},on:{click:e.onClose}},[e._v("返回")])],1),e._v(" "),a("a-col",{style:{textAlign:"left"},attrs:{span:4}},[a("a-button",{style:{marginRight:"8px"},attrs:{size:"small",type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(i,s,!1,null,null,null);t.default=l.exports},FGri:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("//Fk"),n=a.n(r),o=a("Dd8w"),i=a.n(o),s=a("bUp0"),l=a("Xnq1"),u=a("1ySd"),c=[{title:"id",dataIndex:"id",sorter:!0,align:"center",fixed:"left"},{title:"菜单名称",dataIndex:"title",align:"center"},{title:"视图路径",dataIndex:"path",align:"center"},{title:"菜单排序",dataIndex:"order",align:"center"},{title:"父级菜单",dataIndex:"parent",align:"center",scopedSlots:{customRender:"parent"}},{title:"菜单标识",dataIndex:"slug",align:"center"},{title:"资源类型",dataIndex:"type",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",fixed:"right"}],d={components:{MenuAdd:l.default,MenuEdit:u.default},data:function(){return{data:[],pagination:{pageSize:10},loading:!1,columns:c,title:"",filters:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},watch:{title:function(e,t){""==e&&this.fetch({pageSize:this.pagination.pageSize})}},methods:{onSearch:function(e){var t=this;if(""==e.trim())return!1;Object(s.e)({title:e}).then(function(e){console.log(e),t.data=e.data.data;var a=i()({},t.pagination);a.total=e.data.total,t.pagination=a})},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onAdd:function(){this.fetch({pageSize:this.pagination.pageSize})},onEdit:function(){this.fetch(this.getPagination())},handleTableChange:function(e,t,a){var r=i()({},this.pagination);r.current=e.current,r.sortField=a.field,r.sortOrder=a.order,this.pagination=r,this.filters=t,this.fetch(i()({pageSize:e.pageSize,page:e.current,sortField:a.field,sortOrder:a.order},t))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(s.e)(t).then(function(t){console.log(t.data);var a=i()({},e.pagination),r=t.data;e.data=r.data,a.total=r.total,e.pagination=a,e.loading=!1})},del:function(e){var t=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new n.a(function(a,r){Object(s.b)({id:e}).then(function(e){t.$message.success("删除成功"),t.fetch(i()({pageSize:t.pagination.pageSize,page:t.pagination.current,sortField:t.pagination.sortField,sortOrder:t.pagination.sortOrder},t.filters)),t.destroyAll()})})},onCancel:function(){t.destroyAll(),t.$message.info("取消删除",2)}})},destroyAll:function(){this.$destroyAll()}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[a("a-col",{attrs:{span:3,xs:24,sm:5,md:4,lg:3}},[a("menu-add",{attrs:{"on-add":e.onAdd}})],1),e._v(" "),a("a-col",{attrs:{span:8,xs:24,sm:10,md:9,lg:8}},[a("a-input-search",{attrs:{allowClear:"",placeholder:"请输入菜单名称",enterButton:""},on:{search:e.onSearch},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),a("a-row",[a("a-col",[a("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading,scroll:{x:900}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"parent",fn:function(t){return t?a("span",{},[e._v(e._s(t.title))]):a("span",{attrs:{slot:"parent"},slot:"parent"},[e._v("无")])}},{key:"action",fn:function(t){return a("span",{},[a("menu-edit",{attrs:{id:t.id,"on-edit":e.onEdit}}),e._v(" "),a("a-button",{attrs:{size:"small",type:"danger",icon:"delete"},on:{click:function(a){return e.del(t.id)}}})],1)}}],null,!0)})],1)],1),e._v(" "),a("a-divider")],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("Sn1m")},null,null);t.default=m.exports},Sn1m:function(e,t){},Xnq1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("bUp0"),n={name:"MenuAdd",props:{onAdd:{type:Function,default:null}},data:function(){return{form:this.$form.createForm(this),visible:!1,formLayout:"horizontal",menus:[]}},created:function(){this.getMenuList()},methods:{showDrawer:function(){this.visible=!0},onClose:function(){this.form.resetFields(),this.visible=!1},getMenuList:function(){var e=this;Object(r.f)().then(function(t){e.menus=t.data})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){if(!e){if(console.log("values: ",a),Number(a.order)>255)return t.$message.error("排序不能大于255"),!1;console.log(a),Object(r.a)(a).then(function(e){t.$message.success(e.message),t.onAdd(),setTimeout(function(){t.onClose()},100)})}})},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-button",{staticStyle:{"margin-top":"4px"},attrs:{size:"small",type:"primary"},on:{click:e.showDrawer}},[a("a-icon",{attrs:{type:"plus"}}),e._v("菜单\n  ")],1),e._v(" "),a("a-drawer",{attrs:{title:"菜单添加",width:400,visible:e.visible,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:e.onClose}},[a("a-form",{staticStyle:{"margin-top":"20px"},attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"资源类型","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"必须选择资源类型"}]}],expression:"[\n        'type',\n        { rules: [{ required: true, message: '必须选择资源类型' }] },\n      ]"}],attrs:{placeholder:"请选择资源类型"}},[a("a-select-option",{attrs:{value:"m"}},[e._v("菜单")]),e._v(" "),a("a-select-option",{attrs:{value:"e"}},[e._v("页面元素")])],1)],1),e._v(" "),a("a-form-item",{attrs:{label:"父级菜单","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{rules:[{required:!0,message:"必须选择父级菜单"}]}],expression:"['parent_id', { rules: [{ required: true, message: '必须选择父级菜单' }] },]"}],attrs:{placeholder:"请选择父级菜单",showSearch:"",filterOption:e.filterOption}},[a("a-select-option",{attrs:{value:"0"}},[e._v("无父级菜单")]),e._v(" "),e._l(e.menus,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])})],2)],1),e._v(" "),a("a-form-item",{attrs:{label:"资源名称","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"资源名称必须填写"}]}],expression:"['title', { rules: [{ required: true, message: '资源名称必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入资源名称"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"资源标识","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["slug",{rules:[{required:!0,message:"资源标识必须填写"}]}],expression:"['slug', { rules: [{ required: true, message: '资源标识必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入资源标识"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"视图路径","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:"视图路径必须填写"}]}],expression:"['path', { rules: [{ required: true, message: '视图路径必须填写' }] }]"}],attrs:{allowClear:"",placeholder:"请输入视图路径"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"图标名称","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}],attrs:{allowClear:"",placeholder:"请输入图标名称"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"菜单排序","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["order",{rules:[{required:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"必须为0-255数字"}]}],expression:"['order', { rules: [{ required: true, type: 'number',                    transform(value) {\n                    if(value){\n                      return Number(value);\n                    }\n                  }, message: '必须为0-255数字' }] }]"}],attrs:{allowClear:"",placeholder:"请输入菜单排序"}})],1),e._v(" "),a("a-form-item",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px 0px",background:"#fff",textAlign:"right",marginBottom:"0"},attrs:{"wrapper-col":{span:24}}},[a("a-row",[a("a-col",{style:{textAlign:"left"},attrs:{span:4,offset:13}},[a("a-button",{attrs:{size:"small"},on:{click:e.onClose}},[e._v("返回")])],1),e._v(" "),a("a-col",{style:{textAlign:"left"},attrs:{span:4}},[a("a-button",{style:{marginRight:"8px"},attrs:{size:"small",type:"primary","html-type":"submit"}},[e._v("提交")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},i=a("VU/8")(n,o,!1,null,null,null);t.default=i.exports}});
//# sourceMappingURL=28.544fdf2560afd0dd7b6d.js.map