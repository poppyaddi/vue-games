webpackJsonp([5,48,88,89,90],{"6F90":function(t,e){},"6Ump":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("AaXs"),n=a("rxb8"),s=a("vMJZ"),r=a("gWta"),o=a("oQzj"),l={components:{StartTime:r.default,EndTime:o.default},data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),games:[],prices:[],users:[]}},created:function(){this.getGameList()},methods:{handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields(function(t,a){t||(console.log("Received values of form: ",a),e.$emit("search",a))})},handleGameChange:function(t){console.log("selected "+t),this.form.setFieldsValue({price_id:void 0}),this.getPriceList(t)},handleTypeChange:function(t){this.form.setFieldsValue({user_id:void 0}),this.getUserList(t)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getGameList:function(){var t=this;Object(i.e)().then(function(e){t.games=e.data})},getPriceList:function(t){var e=this;Object(n.g)({game_id:t}).then(function(t){e.prices=t.data})},getUserList:function(t){var e=this;Object(s.p)({user_type:t}).then(function(t){e.users=t.data})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"z-index":"999"}},[a("a-form",{attrs:{form:t.form,layout:"inline"},on:{submit:t.handleSubmit}},[a("a-row",{staticStyle:{height:"60px","margin-left":"10px"}},[a("a-col",{attrs:{span:21}},[a("a-row",[a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["game_id"],expression:"['game_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择游戏",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"},on:{change:t.handleGameChange}},t._l(t.games,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_type"],expression:"['user_type']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择账户类型",allowClear:"",size:"small"},on:{change:t.handleTypeChange}},[a("a-select-option",{attrs:{value:"son"}},[t._v("子账户")]),t._v(" "),a("a-select-option",{attrs:{value:"user"}},[t._v("主账户")])],1)],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["identifier"],expression:"['identifier']"}],style:{width:"160px"},attrs:{placeholder:"请输入库存单号",size:"small"}})],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("start-time",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time"],expression:"['start_time']"}]})],1)],1)],1),t._v(" "),a("a-row",{style:{marginTop:"10px"}},[a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_id"],expression:"['price_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择面值",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"}},t._l(t.prices,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.gold))])}),1)],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_id"],expression:"['user_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择用户",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"}},t._l(t.users,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择库存状态",optionFilterProp:"children",allowClear:"",size:"small"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("正常有效")]),t._v(" "),a("a-select-option",{attrs:{value:"2"}},[t._v("已被使用")]),t._v(" "),a("a-select-option",{attrs:{value:"4"}},[t._v("使用失败")]),t._v(" "),a("a-select-option",{attrs:{value:"5"}},[t._v("后台恢复")]),t._v(" "),a("a-select-option",{attrs:{value:"6"}},[t._v("已经获取")]),t._v(" "),a("a-select-option",{attrs:{value:"7"}},[t._v("禁止使用")]),t._v(" "),a("a-select-option",{attrs:{value:"8"}},[t._v("库存上架")])],1)],1)],1),t._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:10,lg:6,xl:6}},[a("a-form-item",[a("end-time",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time"],expression:"['end_time']"}]})],1)],1)],1)],1),t._v(" "),a("a-col",{style:{display:"flex",justifyItems:"center",alignItems:"center",height:"58px"},attrs:{xs:20,sm:16,md:10,lg:2,xl:2,offset:1}},[a("a-form-item",[a("a-button",{attrs:{size:"small",type:"primary","html-type":"submit"}},[t._v("搜索")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(t){a("j3Yl")},"data-v-5b8c78f0",null);e.default=d.exports},gbF4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("vMJZ"),n=a("FhtR"),s={props:{id:{type:Array,default:null}},data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),users:[]}},methods:{handleSubmit:function(t){var e=this,a=this;this.form.validateFields(function(t,i){t||(console.log("Received values of form: ",i),console.log("ids",a.id),i.id=a.id,Object(n.a)(i).then(function(t){e.$emit("dist"),e.$message.success(t.message)}))})},handleSelectChange:function(t){console.log(t),this.form.setFieldsValue({note:"Hi, "+("male"===t?"man":"lady")+"!"})},handleTypeChange:function(t){this.form.setFieldsValue({user_id:void 0}),this.getUserList(t)},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},getUserList:function(t){var e=this;Object(i.p)({user_type:t}).then(function(t){e.users=t.data})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[a("a-row",{staticStyle:{height:"24px"}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_type"],expression:"['user_type']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择账户类型",allowClear:"",size:"small"},on:{change:t.handleTypeChange}},[a("a-select-option",{attrs:{value:"son"}},[t._v("子账户")]),t._v(" "),a("a-select-option",{attrs:{value:"user"}},[t._v("主账户")])],1)],1)],1),t._v(" "),a("a-row",{staticStyle:{"margin-top":"10px",height:"24px"}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_id"],expression:"['user_id']"}],staticStyle:{width:"160px"},attrs:{showSearch:"",placeholder:"选择用户",optionFilterProp:"children",filterOption:t.filterOption,allowClear:"",size:"small"}},t._l(t.users,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1)],1)},staticRenderFns:[]},o=a("VU/8")(s,r,!1,null,null,null);e.default=o.exports},j3Yl:function(t,e){},n5p2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),s=a("MVsr"),r=a("wrdl"),o=a("r0dj"),l=a("gbF4"),c=a("6Ump"),d=[{title:"id",dataIndex:"id",sorter:!0,align:"center",fixed:"left"},{title:"游戏名称",key:"game",align:"center",scopedSlots:{customRender:"game"}},{title:"面值名称",key:"price",align:"center",scopedSlots:{customRender:"price"}},{title:"面值价格",key:"money",align:"center",scopedSlots:{customRender:"money"}},{title:"库存单号",dataIndex:"identifier",align:"center"},{title:"所属用户",key:"owner_user_id",align:"center",scopedSlots:{customRender:"owner_user_id"}},{title:"状态",dataIndex:"status",align:"center"},{title:"入库时间",dataIndex:"created_at",align:"center"},{title:"使用时间",dataIndex:"use_time",align:"center",scopedSlots:{customRender:"use_time"}},{title:"币值",dataIndex:"currency",align:"center",fixed:"right"}],u={components:{DropDown:r.default,Detail:o.default,OnSearch:c.default,Migration:l.default},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},data:function(){return{data:[],pagination:{pageSize:12},loading:!1,columns:d,selectedRowKeys:[],name:"",filters:{},search:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},methods:{onSearch:function(t){this.search=t,this.fetch(n()({},t,{pageSize:this.pagination.pageSize}))},onUpdate:function(){this.fetch(n()({},this.getPagination(),this.search))},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},status:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this;status({id:t}).then(function(t){e.fetch(e.getPagination())})}),handleTableChange:function(t,e,a){var i=n()({},this.pagination);i.current=t.current,i.sortField=a.field,i.sortOrder=a.order,this.pagination=i,this.filters=e,this.fetch(n()({pageSize:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e,this.search))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(s.c)(e).then(function(e){console.log(e.data);var a=n()({},t.pagination),i=e.data;t.data=i.data,a.total=i.total,t.pagination=a,t.loading=!1})},destroyAll:function(){this.$destroyAll()},onSelectChange:function(t){console.log("selectedRowKeys changed: ",t),this.selectedRowKeys=t},dist:function(){console.log(this.selectedRowKeys),this.$refs.migration.handleSubmit()},onDist:function(){this.fetch(n()({},this.getPagination(),this.search)),this.selectedRowKeys=[]}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{staticStyle:{"z-index":"2"}},[a("a-col",{attrs:{span:19}},[a("on-search",{on:{search:t.onSearch}})],1),t._v(" "),a("a-col",{attrs:{span:5}},[a("a-row",{staticStyle:{"margin-top":"10px"}},[a("a-col",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[a("migration",{ref:"migration",attrs:{id:t.selectedRowKeys},on:{dist:t.onDist}})],1),t._v(" "),a("a-col",{staticStyle:{display:"flex","align-items":"center",height:"58px"},attrs:{xs:24,sm:16,md:10,lg:4,xl:4}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.dist}},[t._v("分配")])],1)],1)],1)],1),t._v(" "),a("a-row",[a("a-col",{staticStyle:{"margin-top":"20px"}},[a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},scroll:{x:1e3}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"game",fn:function(e){return a("span",{},[t._v(t._s(e.price.game.name))])}},{key:"price",fn:function(e){return a("span",{},[t._v(t._s(e.price.gold))])}},{key:"money",fn:function(e){return a("span",{},[t._v(t._s(e.price.money))])}},{key:"owner_user_id",fn:function(e){return a("span",{},[e.son?a("div",[t._v(t._s(e.son.name))]):a("div",[t._v(t._s(e.user.name))])])}},{key:"use_time",fn:function(e){return e?a("span",{},[t._v(t._s(e))]):a("span",{attrs:{slot:"use_time"},slot:"use_time"},[t._v("未使用")])}},{key:"parent",fn:function(e){return e?a("span",{},[t._v(t._s(e.title))]):a("span",{attrs:{slot:"parent"},slot:"parent"},[t._v("无")])}}],null,!0)})],1)],1),t._v(" "),a("a-divider")],1)},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(t){a("6F90")},null,null);e.default=m.exports},r0dj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("//Fk"),n=a.n(i),s=a("xMDC"),r=a("MVsr"),o=(a("/Luh"),{props:{text:{type:Object,default:null}},data:function(){return{visible:!1,pStyle:{fontSize:"16px",color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:"16px"},pStyle2:{marginBottom:"24px"},apple:{}}},components:{descriptionItem:s.default},methods:{showDrawer:function(){this.detail(),console.log(this.text)},onClose:function(){this.visible=!1},detail:function(){var t=this;new n.a(function(e){Object(r.b)({id:t.text.id}).then(function(e){t.apple=e.data,t.visible=!0})})},changeActivekey:function(t){console.log(t)}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{display:"inline"}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:t.showDrawer}},[t._v("详")]),t._v(" "),a("a-drawer",{attrs:{width:"640",placement:"right",closable:!0,visible:t.visible},on:{close:t.onClose}},[a("p",{staticStyle:{"text-align":"center"},style:[t.pStyle,t.pStyle2]},[t._v("凭证详情")]),t._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"入库人：",content:t.text.input.name}})],1),t._v(" "),a("a-col",{attrs:{span:12}},[t.text.son?a("description-item",{attrs:{title:"所有者：",content:t.text.son.name}}):a("description-item",{attrs:{title:"所有者：",content:t.text.user.name}})],1)],1),t._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"游戏名称：",content:t.text.price.game.name}})],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"面值名称：",content:t.text.price.gold}})],1)],1),t._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"面值价格：",content:t.text.price.money}})],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"库存单号：",content:t.text.identifier}})],1)],1),t._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"入库时间：",content:t.text.created_at}})],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"币值：",content:t.text.currency}})],1)],1),t._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"购买时间：",content:t.apple.buy_time}})],1)],1),t._v(" "),a("a-divider"),t._v(" "),a("a-row",[a("a-collapse",{on:{change:t.changeActivekey}},[a("a-collapse-panel",{key:"1",style:{textAlign:"center"},attrs:{header:"凭证内容",showArrow:!1}},[a("p",[t._v(t._s(t.apple.receipt))])])],1)],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(o,l,!1,null,null,null);e.default=c.exports},wrdl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("MVsr"),n={props:{id:{type:Number,default:null}},methods:{handleButtonClick:function(t){console.log("click left button",t)},handleMenuClick:function(t){var e=this;console.log("click",t.key),console.log(this.id),Object(i.d)({id:this.id,status:t.key}).then(function(t){e.$emit("update"),e.$message.success(t.message)})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{display:"inline"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:t.handleMenuClick},slot:"overlay"},[t.hasPermission("stock.no_deal")?a("a-menu-item",{key:"5"},[a("a-icon",{attrs:{type:"warning"}}),t._v("设置为可出库(不可交易)")],1):t._e(),t._v(" "),t.hasPermission("stock.used")?a("a-menu-item",{key:"2"},[a("a-icon",{attrs:{type:"warning"}}),t._v("设置为已使用")],1):t._e(),t._v(" "),t.hasPermission("stock.effective")?a("a-menu-item",{key:"1"},[a("a-icon",{attrs:{type:"warning"}}),t._v("设置为正常有效")],1):t._e(),t._v(" "),t.hasPermission("stock.forbidden")?a("a-menu-item",{key:"7"},[a("a-icon",{attrs:{type:"warning"}}),t._v("禁止使用")],1):t._e()],1),t._v(" "),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small"}},[t._v(" 操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)},staticRenderFns:[]},r=a("VU/8")(n,s,!1,null,null,null);e.default=r.exports}});
//# sourceMappingURL=5.941fa1d0172c28d05ac6.js.map