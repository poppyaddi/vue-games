{"version":3,"sources":["webpack:///src/views/system/roles/RoleList.vue","webpack:///./src/views/system/roles/RoleList.vue?1585","webpack:///./src/views/system/roles/RoleList.vue","webpack:///src/views/system/roles/MenuDrawer.vue","webpack:///./src/api/role_menu.js","webpack:///./src/views/system/roles/MenuDrawer.vue?910f","webpack:///./src/views/system/roles/MenuDrawer.vue","webpack:///src/views/system/roles/PermDrawer.vue","webpack:///./src/api/role_perm.js","webpack:///./src/views/system/roles/PermDrawer.vue?d38f","webpack:///./src/views/system/roles/PermDrawer.vue"],"names":["columns","title","dataIndex","align","fixed","scopedSlots","customRender","RoleList","components","MenuDrawer","PermDrawer","data","loading","created","this","roleList","mounted","methods","_this","Object","role","then","response","edit","id","$router","push","name","query","del","self","$confirm","content","cancelText","okText","onOk","promise_default","a","resolve","reject","code","$message","success","destroyAll","onCancel","info","$destroyAll","roleAdd","perm_list","console","log","visible","handleOk","e","roles_RoleList","render","_vm","_h","$createElement","_c","_self","staticStyle","max-width","attrs","size","type","on","click","_v","pagination","dataSource","rowKey","record","scroll","x","_u","key","fn","text","icon","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","props","Number","expandedKeys","autoExpandParent","checkedKeys","selectedKeys","treeData","watch","val","showDrawer","getTreeMenu","setTimeout","onClose","_this2","menu","getSelectedMenu","add","_this3","role_id","menu_id","request","url","method","_this4","params","onExpand","onCheck","onSelect","roles_MenuDrawer","display","placement","closable","width","close","margin","checkable","expand","select","model","value","callback","$$v","expression","margin-top","getTreePerm","perm","getSelectedPerm","perm_id","roles_PermDrawer","_t"],"mappings":"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","file":"static/js/32.b94743227410729744ff.js","sourcesContent":["<template>\n  <div style=\"max-width: 80%;\">\n    <a-button size=\"small\" type=\"primary\" @click=\"roleAdd\">\n      <a-icon type=\"plus\" />角色\n    </a-button>\n    <a-table\n      :pagination=\"false\"\n      :columns=\"columns\"\n      :dataSource=\"data\"\n      :loading=\"loading\"\n      :rowKey=\"record => record.id\"\n      :scroll=\"{ x: 500 }\"\n    >\n      <span slot=\"action\" slot-scope=\"text\">\n        <a-button size=\"small\" type=\"primary\" @click=\"edit(text.id)\" icon=\"edit\" />\n        <a-button size=\"small\" type=\"danger\" @click=\"del(text.id)\" icon=\"delete\" />\n        <menu-drawer :id=\"text.id\" />\n        <perm-drawer :id=\"text.id\" />\n        <!-- <a-button size=\"small\" type=\"primary\" @click=\"perm_list(text.id)\">权限</a-button> -->\n      </span>\n    </a-table>\n  </div>\n</template>\n<script>\nimport { index, edit, del } from \"@/api/role\";\nimport MenuDrawer from \"./MenuDrawer\";\nimport PermDrawer from \"./PermDrawer\";\nconst columns = [\n  {\n    title: \"id\",\n    dataIndex: \"id\",\n    align: \"center\",\n    fixed: \"left\"\n  },\n  {\n    title: \"角色名称\",\n    dataIndex: \"name\",\n    align: \"center\"\n  },\n  {\n    title: \"角色描述\",\n    dataIndex: \"description\",\n    align: \"center\"\n  },\n  {\n    title: \"Action\",\n    scopedSlots: { customRender: \"action\" },\n    align: \"center\",\n    fixed: \"right\"\n  }\n];\n\nexport default {\n  components: { MenuDrawer, PermDrawer },\n  data() {\n    return {\n      data: [],\n      columns,\n      loading: true\n    };\n  },\n  created() {\n    this.roleList();\n  },\n  mounted() {},\n\n  methods: {\n    roleList() {\n      index().then(response => {\n        this.data = response.data;\n        this.loading = false;\n      });\n    },\n\n    edit(id) {\n      this.$router.push({\n        name: \"RoleEdit\",\n        query: { id }\n      });\n    },\n\n    del(id) {\n      const self = this;\n      this.$confirm({\n        content: \"确认删除？\",\n        cancelText: \"取消\",\n        okText: \"删除\",\n        onOk() {\n          return new Promise((resolve, reject) => {\n            // setTimeout(Math.random() > 0.5 ? resolve : reject, 1000)\n\n            del({ id }).then(response => {\n              if (response.code == 200) {\n                self.$message.success(\"删除成功\");\n                self.roleList();\n                self.destroyAll();\n              }\n            });\n          });\n        },\n        onCancel() {\n          self.destroyAll();\n          self.$message.info(\"取消删除\", 2);\n        }\n      });\n    },\n\n    destroyAll() {\n      this.$destroyAll();\n    },\n\n    roleAdd() {\n      this.$router.push({\n        name: \"RoleAdd\"\n      });\n    },\n\n    perm_list(id) {\n      console.log(\"this is perm list \" + id);\n      this.visible = true;\n    },\n\n    handleOk(e) {\n      console.log(e);\n      this.visible = false;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/roles/RoleList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"max-width\":\"80%\"}},[_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.roleAdd}},[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\"角色\\n  \")],1),_vm._v(\" \"),_c('a-table',{attrs:{\"pagination\":false,\"columns\":_vm.columns,\"dataSource\":_vm.data,\"loading\":_vm.loading,\"rowKey\":function (record) { return record.id; },\"scroll\":{ x: 500 }},scopedSlots:_vm._u([{key:\"action\",fn:function(text){return _c('span',{},[_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"edit\"},on:{\"click\":function($event){return _vm.edit(text.id)}}}),_vm._v(\" \"),_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.del(text.id)}}}),_vm._v(\" \"),_c('menu-drawer',{attrs:{\"id\":text.id}}),_vm._v(\" \"),_c('perm-drawer',{attrs:{\"id\":text.id}})],1)}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4817344b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/system/roles/RoleList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4817344b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoleList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/roles/RoleList.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"display: inline;\">\n    <a-button size=\"small\" type=\"primary\" @click=\"showDrawer\">菜单</a-button>\n    <a-drawer\n      title=\"分配菜单\"\n      placement=\"right\"\n      :closable=\"true\"\n      @close=\"onClose\"\n      :visible=\"visible\"\n      :width=\"400\"\n    >\n      <!-- tree 控件 -->\n      <div style=\"width: 200px; margin: 0 auto;\">\n        <a-tree\n          checkable\n          @expand=\"onExpand\"\n          :expandedKeys=\"expandedKeys\"\n          :autoExpandParent=\"autoExpandParent\"\n          v-model=\"checkedKeys\"\n          @select=\"onSelect\"\n          :selectedKeys=\"selectedKeys\"\n          :treeData=\"treeData\"\n        />\n        <div style=\"margin-top: 30px;\">\n          <a-button type=\"primary\" size=\"small\" @click=\"add\">确认</a-button>\n        </div>\n      </div>\n    </a-drawer>\n  </div>\n</template>\n<script>\nimport { tree } from \"@/api/menu\";\nimport { store, index } from \"@/api/role_menu\";\nimport { resolve } from \"q\";\nexport default {\n  props: {\n    id: Number\n  },\n  mounted() {\n    // console.log(this.id)\n  },\n  data() {\n    return {\n      visible: false,\n      // tree数据\n      expandedKeys: [],\n      autoExpandParent: true,\n      checkedKeys: [], // 选中的数据\n      selectedKeys: [],\n      treeData: []\n    };\n  },\n\n  watch: {\n    checkedKeys(val) {\n      console.log(\"onCheck\", val);\n    }\n  },\n  methods: {\n    showDrawer() {\n      this.getTreeMenu();\n\n      setTimeout(() => {\n        this.visible = true;\n      }, 300);\n    },\n    onClose() {\n      this.visible = false;\n    },\n\n    getTreeMenu() {\n      new Promise(resolve => {\n        tree().then(response => {\n          this.treeData = response.data;\n          // console.log(\"tree\", response);\n          resolve()\n        });\n      }).then(() => {\n        this.getSelectedMenu()\n      })\n    },\n\n    add() {\n      store({ role_id: this.id, menu_id: this.checkedKeys }).then(\n        response => {\n          this.$message.success('分配成功')\n          this.onClose()\n        }\n      );\n    },\n\n    getSelectedMenu() {\n      index({ role_id: this.id }).then(response => {\n        this.checkedKeys = response.data.menu_id;\n        this.expandedKeys = response.data.menu_id\n      });\n    },\n\n    // tree methods\n    onExpand(expandedKeys) {\n      console.log(\"onExpand\", expandedKeys);\n      // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n      // or, you can remove all expanded children keys.\n      this.expandedKeys = expandedKeys;\n      this.autoExpandParent = false;\n    },\n    onCheck(checkedKeys) {\n      console.log(\"onCheck\", checkedKeys);\n      this.checkedKeys = checkedKeys;\n    },\n    onSelect(selectedKeys, info) {\n      console.log(\"onSelect\", info);\n      this.selectedKeys = selectedKeys;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/roles/MenuDrawer.vue","import request from '@/utils/request'\n\nexport function store(data) {\n    return request({\n        url: '/v1/role_menu/store',\n        method: 'post',\n        data\n    })\n}\n\nexport function index(data) {\n    return request({\n        url: '/v1/role_menu/index',\n        method: 'get',\n        params: data\n    })\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/role_menu.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline\"}},[_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.showDrawer}},[_vm._v(\"菜单\")]),_vm._v(\" \"),_c('a-drawer',{attrs:{\"title\":\"分配菜单\",\"placement\":\"right\",\"closable\":true,\"visible\":_vm.visible,\"width\":400},on:{\"close\":_vm.onClose}},[_c('div',{staticStyle:{\"width\":\"200px\",\"margin\":\"0 auto\"}},[_c('a-tree',{attrs:{\"checkable\":\"\",\"expandedKeys\":_vm.expandedKeys,\"autoExpandParent\":_vm.autoExpandParent,\"selectedKeys\":_vm.selectedKeys,\"treeData\":_vm.treeData},on:{\"expand\":_vm.onExpand,\"select\":_vm.onSelect},model:{value:(_vm.checkedKeys),callback:function ($$v) {_vm.checkedKeys=$$v},expression:\"checkedKeys\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"30px\"}},[_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.add}},[_vm._v(\"确认\")])],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-583724f3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/system/roles/MenuDrawer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuDrawer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MenuDrawer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-583724f3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MenuDrawer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/roles/MenuDrawer.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"display: inline;\">\n    <a-button size=\"small\" type=\"primary\" @click=\"showDrawer\">\n      <slot>权限</slot>\n    </a-button>\n    <a-drawer\n      title=\"分配权限\"\n      placement=\"right\"\n      :closable=\"true\"\n      @close=\"onClose\"\n      :visible=\"visible\"\n      :width=\"300\"\n    >\n      <!-- tree 控件 -->\n      <div style=\"width: 200px; margin: 0 auto;\">\n        <a-tree\n          checkable\n          @expand=\"onExpand\"\n          :expandedKeys=\"expandedKeys\"\n          :autoExpandParent=\"autoExpandParent\"\n          v-model=\"checkedKeys\"\n          @select=\"onSelect\"\n          :selectedKeys=\"selectedKeys\"\n          :treeData=\"treeData\"\n        />\n        <div style=\"margin-top: 30px;\">\n          <a-button type=\"primary\" size=\"small\" @click=\"add\">确认</a-button>\n        </div>\n      </div>\n    </a-drawer>\n  </div>\n</template>\n<script>\nimport { tree } from \"@/api/perm\";\nimport { store, index } from \"@/api/role_perm\";\nexport default {\n  props: {\n    id: Number\n  },\n  mounted() {\n    // console.log(this.id)\n  },\n  data() {\n    return {\n      visible: false,\n      // tree数据\n      expandedKeys: [],\n      autoExpandParent: true,\n      checkedKeys: [], // 选中的数据\n      selectedKeys: [],\n      treeData: []\n    };\n  },\n\n  watch: {\n    checkedKeys(val) {\n      console.log(\"onCheck\", val);\n    }\n  },\n  methods: {\n    showDrawer() {\n      this.getTreePerm();\n\n      setTimeout(() => {\n        this.visible = true;\n      }, 300);\n    },\n    onClose() {\n      this.visible = false;\n    },\n\n    getTreePerm() {\n      new Promise(resolve => {\n        tree().then(response => {\n          this.treeData = response.data;\n          // console.log(\"tree\", response);\n          resolve();\n        });\n      }).then(() => {\n        this.getSelectedPerm();\n      });\n    },\n\n    getSelectedPerm() {\n      index({ role_id: this.id }).then(response => {\n        this.checkedKeys = response.data.perm_id;\n        this.expandedKeys = response.data.perm_id;\n      });\n    },\n\n    add() {\n      store({ role_id: this.id, perm_id: this.checkedKeys }).then(\n        response => {\n          // console.log(response);\n          this.$message.success(\"分配成功\");\n          this.onClose();\n        }\n      );\n    },\n\n    // tree methods\n    onExpand(expandedKeys) {\n      console.log(\"onExpand\", expandedKeys);\n      // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n      // or, you can remove all expanded children keys.\n      this.expandedKeys = expandedKeys;\n      this.autoExpandParent = false;\n    },\n    onCheck(checkedKeys) {\n      console.log(\"onCheck\", checkedKeys);\n      this.checkedKeys = checkedKeys;\n    },\n    onSelect(selectedKeys, info) {\n      console.log(\"onSelect\", info);\n      this.selectedKeys = selectedKeys;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/roles/PermDrawer.vue","import request from '@/utils/request'\n\nexport function index(data) {\n    return request({\n        url: '/v1/role_perm/index',\n        method: 'get',\n        params: data\n    })\n}\n\nexport function store(data){\n    return request({\n        url: '/v1/role_perm/store',\n        method: 'post',\n        data\n    })\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/role_perm.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"inline\"}},[_c('a-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.showDrawer}},[_vm._t(\"default\",[_vm._v(\"权限\")])],2),_vm._v(\" \"),_c('a-drawer',{attrs:{\"title\":\"分配权限\",\"placement\":\"right\",\"closable\":true,\"visible\":_vm.visible,\"width\":300},on:{\"close\":_vm.onClose}},[_c('div',{staticStyle:{\"width\":\"200px\",\"margin\":\"0 auto\"}},[_c('a-tree',{attrs:{\"checkable\":\"\",\"expandedKeys\":_vm.expandedKeys,\"autoExpandParent\":_vm.autoExpandParent,\"selectedKeys\":_vm.selectedKeys,\"treeData\":_vm.treeData},on:{\"expand\":_vm.onExpand,\"select\":_vm.onSelect},model:{value:(_vm.checkedKeys),callback:function ($$v) {_vm.checkedKeys=$$v},expression:\"checkedKeys\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"30px\"}},[_c('a-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.add}},[_vm._v(\"确认\")])],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7522b8a6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/system/roles/PermDrawer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PermDrawer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PermDrawer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7522b8a6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PermDrawer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/roles/PermDrawer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}